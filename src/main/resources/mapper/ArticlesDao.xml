<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pers.zheng.blog.dao.ArticlesDao">

    <resultMap type="pers.zheng.blog.entity.Articles" id="XzArticlesMap">
        <result property="articleId" column="article_id" jdbcType="INTEGER"/>
        <result property="articleContent" column="article_content" jdbcType="VARCHAR"/>
        <result property="articleTitle" column="article_title" jdbcType="VARCHAR"/>
        <result property="articleViewCount" column="article_view_count" jdbcType="OTHER"/>
        <result property="articleLikeCount" column="article_like_count" jdbcType="OTHER"/>
        <result property="articleDate" column="article_date" jdbcType="TIMESTAMP"/>
        <result property="articleCommentCount" column="article_comment_count" jdbcType="OTHER"/>
    </resultMap>

    <select id="getArticleItem" resultType="pers.zheng.blog.vo.ArticleItemVo">
        SELECT
            article_id,
            article_title,
            article_view_count,
            article_comment_count,
            article_summary,
            article_date
        FROM
            ty_articles
        WHERE
            article_status = #{state}
    </select>

    <select id="getArticleById" resultType="pers.zheng.blog.vo.ArticleContentVo">
        SELECT
            article_id,
            article_content,
            article_date,
            article_like_count,
            article_title,
            article_comment_count,
            article_view_count
        FROM
            ty_articles
        WHERE article_id = #{articleId}
    </select>

    <select id="getArticleItemByLabel" resultType="pers.zheng.blog.vo.ArticleItemVo">
        SELECT
            a.article_id,
            a.article_title,
            a.article_view_count,
            a.article_comment_count,
            a.article_summary,
            a.article_date
        FROM
            ty_articles a
        JOIN
            ty_article_label b
        on
            a.article_id = b.article_id
        WHERE
	        b.label_id = #{labelId}
	    AND
	        a.article_status = #{state}
    </select>

    <select id="getArticleItemsByName" resultType="pers.zheng.blog.vo.ArticleItemVo">
        SELECT
            article_id,
            article_content,
            article_date,
            article_like_count,
            article_title,
            article_comment_count,
            article_view_count
        FROM
            ty_articles
        WHERE
            article_title like concat('%', #{keyword}, '%')
        AND
            article_status = #{state}
    </select>
</mapper>