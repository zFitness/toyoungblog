(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ae98e28"],{2234:function(e,t,r){},"26fcc":function(e,t,r){"use strict";var a=r("3392"),l=r.n(a);l.a},2734:function(e,t,r){"use strict";var a=r("2234"),l=r.n(a);l.a},3392:function(e,t,r){},"34cd":function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return o}));var a=r("b775");function l(){return Object(a["a"])({url:"api/admin/labels",method:"get",params:{}})}function s(){return Object(a["a"])({url:"api/admin/labels?more=true",method:"get",params:{}})}function n(e){return Object(a["a"])({url:"api/admin/labels",method:"post",data:e})}function i(e,t){return Object(a["a"])({url:"api/admin/labels/".concat(e),method:"put",data:t})}function o(e){return Object(a["a"])({url:"api/admin/labels/".concat(e),method:"delete",params:{}})}},66135:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:40}},[r("el-col",{staticStyle:{"padding-right":"8px","margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},xl:{span:12}}},[r("tag-list",{key:e.key})],1),r("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},xl:{span:12}}},[r("tag-add")],1)],1)],1)},l=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table-wrapper"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("所有标签")])]),e._l(e.tableData,(function(t,a){return r("el-tooltip",{key:a,staticClass:"item",attrs:{effect:"dark",placement:"top-start",content:t.articleCount+"篇文章"}},[r("el-tag",{staticClass:"tag",attrs:{size:"medium"},on:{click:function(r){return e.handleClick(t)}}},[e._v(e._s(t.labelName))])],1)}))],2)],1)},n=[],i=r("34cd"),o=r("2b0e"),u=new o["default"],c={name:"TagList",mounted:function(){this.listLabels()},methods:{handleClick:function(e){u.$emit("edit",e)},listLabels:function(){var e=this;Object(i["d"])().then((function(t){e.tableData=t.data}))}},data:function(){return{tableData:[],total:0,listQuery:{current:1,size:10}}}},m=c,d=(r("2734"),r("2877")),f=Object(d["a"])(m,s,n,!1,null,"7a5e7d43",null),p=f.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-wrapper"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{domProps:{textContent:e._s(e.isAdd?"添加标签":"修改标签")}})]),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称",prop:"labelName"}},[r("el-input",{model:{value:e.ruleForm.labelName,callback:function(t){e.$set(e.ruleForm,"labelName",t)},expression:"ruleForm.labelName"}})],1),r("el-form-item",{attrs:{label:"别名",prop:"labelSlug"}},[r("el-input",{model:{value:e.ruleForm.labelSlug,callback:function(t){e.$set(e.ruleForm,"labelSlug",t)},expression:"ruleForm.labelSlug"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"labelDescription"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.labelDescription,callback:function(t){e.$set(e.ruleForm,"labelDescription",t)},expression:"ruleForm.labelDescription"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("更新")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}],on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("返回添加")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isAdd,expression:"!isAdd"}],on:{click:e.handleDelete}},[e._v("删除")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},h=[],g={name:"TagAdd",data:function(){return{isAdd:!0,ruleForm:{labelName:"",labelSlug:"",labelDescription:""},ruleFormCopy:{labelName:"",labelSlug:"",labelDescription:""},rules:{labelName:[{required:!0,message:"请输入标签名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],labelSlug:[{required:!0,message:"请输入别名",trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}]}}},methods:{handleDelete:function(){var e=this;Object(i["b"])(this.ruleForm.labelId).then((function(t){200==t.code?(e.$notify({title:"成功",message:"删除成功",type:"success"}),e.resetForm("ruleForm"),u.$emit("add")):e.$notify.error({title:"错误",message:t.data})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isAdd?Object(i["a"])(t.ruleForm).then((function(e){200==e.code?(t.$notify({title:"成功",message:"添加成功",type:"success"}),t.resetForm("ruleForm"),u.$emit("add")):t.$notify.error({title:"错误",message:e.message})})):Object(i["e"])(t.ruleForm.labelId,t.ruleForm).then((function(e){200==e.code?(t.$notify({title:"成功",message:"修改成功",type:"success"}),t.resetForm("ruleForm")):t.$notify.error({title:"错误",message:e.message})}))}))},resetForm:function(e){this.isAdd?this.$refs[e].resetFields():(this.isAdd=!0,this.ruleForm=this.ruleFormCopy)}},mounted:function(){var e=this;u.$on("edit",(function(t){e.isAdd=!1,e.ruleForm=t})),u.$on("delete",(function(){e.resetForm("ruleForm")}))}},v=g,F=(r("26fcc"),Object(d["a"])(v,b,h,!1,null,"fe149cc4",null)),x=F.exports,w={name:"Tag",data:function(){return{key:1}},components:{TagList:p,TagAdd:x},mounted:function(){var e=this;u.$on("add",(function(t){e.key++}))},destroyed:function(){u.$off("add",{}),u.$off("edit",{}),u.$off("delete",{})}},y=w,$=Object(d["a"])(y,a,l,!1,null,null,null);t["default"]=$.exports}}]);